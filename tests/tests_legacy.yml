tests:
    -
      name: atmosphere
      groups:
        - atmos
      commands:
        - HERE/../spider -options_file HERE/opts/atmosphere.opts -nstepsmacro 1
        - HERE/json_timestep_to_txt.py output/50000.json
      expected: expected_output/expected_atmosphere.txt
      comparison: 50000.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: atmosphere_ic
      groups:
        - atmos
      commands:
        - HERE/../spider -options_file HERE/opts/atmosphere.opts -nstepsmacro 0
        - HERE/json_timestep_to_txt.py output/0.json
      expected: expected_output/expected_atmosphere_ic.txt
      comparison: 0.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10
    -
      name: blackbody
      commands:
        - HERE/../spider -options_file HERE/opts/blackbody.opts
        - HERE/json_timestep_to_txt.py output/10000.json
      expected: expected_output/expected_blackbody.txt
      comparison: 10000.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: blackbody_short
      groups:
        - basic
      commands:
        - HERE/../spider -options_file HERE/opts/blackbody.opts -nstepsmacro 1 -dtmacro 10
        - HERE/json_timestep_to_txt.py output/10.json
      expected: expected_output/expected_blackbody_short.txt
      comparison: 10.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-5
          atol: 1e-5
        -
          key: scaling:
          rtol: 1e-5
          atol: 1e-5

    -
      name: blackbody_mixed
      groups:
        - basic
      commands:
        - HERE/../spider -options_file HERE/opts/blackbody.opts -nstepsmacro 0 -ic_adiabat_entropy 2100
        - HERE/json_timestep_to_txt.py output/0.json
      expected: expected_output/expected_blackbody_mixed.txt
      comparison: 0.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-5
          atol: 1e-5
        -
          key: scaling:
          rtol: 1e-5
          atol: 1e-5

    -
      name: reaction
      commands:
        - HERE/../spider -options_file HERE/opts/reaction.opts -nstepsmacro 1
        - HERE/json_timestep_to_txt.py output/1000.json
      expected: expected_output/expected_reaction.txt
      comparison: 1000.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: reaction_ic
      commands:
        - HERE/../spider -options_file HERE/opts/reaction.opts -nstepsmacro 0
        - HERE/json_timestep_to_txt.py output/0.json
      expected: expected_output/expected_reaction_ic.txt
      comparison: 0.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: socrates_p_restart
      commands:
        - HERE/../spider -options_file HERE/opts/socrates_p_restart.opts -ic_interior_filename HERE/opts/socrates_p_restart_18113.json
        - HERE/json_timestep_to_txt.py output/34714.json
      expected: expected_output/expected_socrates_p_restart.txt
      comparison: 34714.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: solid_convection
      commands:
        - HERE/../spider -options_file HERE/opts/solid_convection.opts -nstepsmacro 10
        - HERE/json_timestep_to_txt.py output/100000000.json
      expected: expected_output/expected_solid_convection.txt
      comparison: 100000000.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: solid_convection_ic
      commands:
        - HERE/../spider -options_file HERE/opts/solid_convection.opts -nstepsmacro 0
        - HERE/json_timestep_to_txt.py output/0.json
      expected: expected_output/expected_solid_convection_ic.txt
      comparison: 0.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10

    -
      name: solid_convection_two_layer
      commands:
        - HERE/../spider -options_file HERE/opts/solid_convection_two_layer.opts -nstepsmacro 10
        - HERE/json_timestep_to_txt.py output/100000000.json
      expected: expected_output/expected_solid_convection_two_layer.txt
      comparison: 100000000.txt
      type: float_lines
      rules:
        -
          key: val:
          rtol: 1e-11
          atol: 1e-10
        -
          key: scaling:
          rtol: 1e-11
          atol: 1e-10
